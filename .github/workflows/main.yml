name: Build FFmpeg 7 for Android ARM64

on:
  workflow_dispatch:

jobs:
  build:
    runs-on: ubuntu-latest

    steps:
      - name: Checkout FFmpeg Maker
        uses: actions/checkout@v4
        with:
          repository: Javernaut/ffmpeg-android-maker
          ref: master
          path: ffmpeg-android-maker

      - name: Build FFmpeg
        working-directory: ffmpeg-android-maker
        run: |
          set -e # Exit immediately if a command fails
          # set -x # Uncomment for detailed command logging during debugging
          ./ffmpeg-android-maker.sh

      - name: List Output Directory (for debugging)
        if: always()
        run: ls -Rl ~/out

      - name: Upload FFmpeg Build
        uses: actions/upload-artifact@v4
        with:
          name: ffmpeg7-android
          path: ~/out